<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Experiment 21 - .NET Experiments</title>
<meta name="description" content="This post converts GPS trajectory data into learned embedded features to reveal human mobility patterns, enabling applications in urban planning, personalized services, and behavioral analysis.">


  <meta name="author" content="Daniel Felps">
  
  <meta property="article:author" content="Daniel Felps">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content=".NET Experiments">
<meta property="og:title" content="Experiment 21">
<meta property="og:url" content="https://dlfelps.github.io/2025/08/21/mobility.html">


  <meta property="og:description" content="This post converts GPS trajectory data into learned embedded features to reveal human mobility patterns, enabling applications in urban planning, personalized services, and behavioral analysis.">







  <meta property="article:published_time" content="2025-08-21T00:00:00+00:00">






<link rel="canonical" href="https://dlfelps.github.io/2025/08/21/mobility.html">












<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title=".NET Experiments Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          .NET Experiments
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="https://mmistakes.github.io/minimal-mistakes/docs/quick-start-guide/"
                
                
              >Quick-Start Guide</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Experiment 21">
    <meta itemprop="description" content="This post converts GPS trajectory data into learned embedded features to reveal human mobility patterns, enabling applications in urban planning, personalized services, and behavioral analysis.">
    <meta itemprop="datePublished" content="2025-08-21T00:00:00+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://dlfelps.github.io/2025/08/21/mobility.html" itemprop="url">Experiment 21
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2025-08-21T00:00:00+00:00">August 21, 2025</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          16 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#introduction">Introduction</a><ul><li><a href="#the-challenge-making-sense-of-mobility-data">The Challenge: Making Sense of Mobility Data</a></li><li><a href="#introducing-lymob-4cities-a-rich-mobility-dataset">Introducing LYMob-4Cities: A Rich Mobility Dataset</a></li><li><a href="#the-architecture-hybrid-transformer-lstm-for-mobility">The Architecture: Hybrid Transformer-LSTM for Mobility</a><ul><li><a href="#core-components">Core Components</a></li><li><a href="#why-this-architecture-works">Why This Architecture Works</a></li></ul></li><li><a href="#the-complete-pipeline">The Complete Pipeline</a><ul><li><a href="#stage-1-model-training">Stage 1: Model Training</a></li><li><a href="#stage-2-embedding-generation">Stage 2: Embedding Generation</a></li><li><a href="#stage-3-interactive-exploration">Stage 3: Interactive Exploration</a></li></ul></li><li><a href="#remarkable-results-what-the-embeddings-reveal">Remarkable Results: What the Embeddings Reveal</a></li><li><a href="#real-world-applications">Real-World Applications</a><ul><li><a href="#Ô∏è-urban-planning">üèôÔ∏è Urban Planning</a></li><li><a href="#-personalized-services">üì± Personalized Services</a></li><li><a href="#-anomaly-detection">üö® Anomaly Detection</a></li><li><a href="#-business-intelligence">üìä Business Intelligence</a></li><li><a href="#-research-applications">üî¨ Research Applications</a></li></ul></li><li><a href="#privacy-and-ethics-a-responsible-approach">Privacy and Ethics: A Responsible Approach</a></li><li><a href="#technical-innovation-why-this-matters">Technical Innovation: Why This Matters</a></li><li><a href="#getting-started-try-it-yourself">Getting Started: Try It Yourself</a></li><li><a href="#the-future-of-mobility-intelligence">The Future of Mobility Intelligence</a></li><li><a href="#conclusion-from-data-to-intelligence">Conclusion: From Data to Intelligence</a></li><li><a href="#about-the-dataset">About the Dataset</a></li></ul></li></ul>
            </nav>
          </aside>
        
        <p>This post converts GPS trajectory data into learned embedded features to reveal human mobility patterns, enabling applications in urban planning, personalized services, and behavioral analysis.</p>

<h1 id="introduction">Introduction</h1>

<p>Human mobility patterns tell fascinating stories. Where we go, when we travel, and how we move through space reveals insights about urban planning, social behavior, economic activity, and even public health. But extracting meaningful patterns from raw GPS trajectories is challenging‚Äîuntil now.</p>

<p>In this post, I‚Äôll walk you through an exciting deep learning project that transforms complex mobility data into intelligent embeddings using a hybrid transformer-LSTM architecture. We‚Äôll explore how this approach can revolutionize everything from urban planning to personalized location services.</p>

<h2 id="the-challenge-making-sense-of-mobility-data">The Challenge: Making Sense of Mobility Data</h2>

<p>GPS trajectories are deceptively complex. A single user‚Äôs movement data contains:</p>
<ul>
  <li><strong>Spatial information</strong>: Latitude and longitude coordinates</li>
  <li><strong>Temporal patterns</strong>: When movements occur, day-of-week effects</li>
  <li><strong>Sequential dependencies</strong>: How current location influences future destinations</li>
  <li><strong>Individual behaviors</strong>: Personal routines and preferences</li>
</ul>

<p>Traditional analysis methods struggle to capture these multi-dimensional relationships. That‚Äôs where deep learning comes in.</p>

<h2 id="introducing-lymob-4cities-a-rich-mobility-dataset">Introducing LYMob-4Cities: A Rich Mobility Dataset</h2>

<p>Our project leverages the <strong>LYMob-4Cities dataset</strong>, a comprehensive collection of anonymized mobility traces from four major cities. This dataset provides:</p>

<ul>
  <li><strong>Multi-city coverage</strong>: Diverse urban environments with different characteristics</li>
  <li><strong>Temporal depth</strong>: Extended observation periods capturing seasonal and weekly patterns</li>
  <li><strong>User diversity</strong>: Thousands of anonymized users with varying mobility behaviors</li>
  <li><strong>High resolution</strong>: Detailed GPS coordinates with timestamp information</li>
</ul>

<p>The dataset structure includes:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">uid</code>: Anonymized user identifier</li>
  <li><code class="language-plaintext highlighter-rouge">d</code>: Day number in the observation period</li>
  <li>Geographic coordinates (latitude/longitude)</li>
  <li>Temporal metadata including timestamps and day-of-week indicators</li>
</ul>

<p>This rich dataset enables us to build models that generalize across different urban contexts while respecting user privacy through anonymization.</p>

<h2 id="the-architecture-hybrid-transformer-lstm-for-mobility">The Architecture: Hybrid Transformer-LSTM for Mobility</h2>

<p>Our approach combines the best of both worlds: transformers for attention-based pattern recognition and LSTMs for sequential modeling.</p>

<h3 id="core-components">Core Components</h3>

<p><strong>1. Multi-Modal Embeddings</strong></p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Spatial embedding: lat/lon ‚Üí dense vector
</span><span class="n">spatial_emb</span> <span class="o">=</span> <span class="nc">SpatialEmbedding</span><span class="p">(</span><span class="n">coordinates</span><span class="p">)</span>

<span class="c1"># Temporal embedding: time features ‚Üí dense vector  
</span><span class="n">temporal_emb</span> <span class="o">=</span> <span class="nc">TemporalEmbedding</span><span class="p">(</span><span class="n">timestamps</span><span class="p">,</span> <span class="n">weekend_flags</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>2. Cross-Attention Mechanism</strong>
The model learns how spatial and temporal features interact through dedicated attention layers, capturing patterns like ‚Äúthis user typically visits restaurants on Friday evenings.‚Äù</p>

<p><strong>3. Transformer Blocks</strong>
Multi-head self-attention processes the entire trajectory sequence simultaneously, identifying important locations and movement patterns.</p>

<p><strong>4. Bidirectional LSTM</strong>
Sequential processing captures temporal dependencies and generates the final 512-dimensional embedding that summarizes the entire trajectory.</p>

<h3 id="why-this-architecture-works">Why This Architecture Works</h3>

<ul>
  <li><strong>Transformers</strong> excel at identifying important locations through attention</li>
  <li><strong>LSTMs</strong> capture sequential dependencies in movement</li>
  <li><strong>Cross-attention</strong> learns spatio-temporal interactions</li>
  <li><strong>Bidirectional processing</strong> considers both past and future context</li>
</ul>

<h2 id="the-complete-pipeline">The Complete Pipeline</h2>

<h3 id="stage-1-model-training">Stage 1: Model Training</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python train_s2s.py
</code></pre></div></div>

<p>The training process:</p>
<ul>
  <li>Loads mobility data from multiple cities</li>
  <li>Applies data augmentation (Gaussian noise) for robustness</li>
  <li>Trains the hybrid model with early stopping</li>
  <li>Saves the best checkpoint for inference</li>
</ul>

<p><strong>Key Innovation</strong>: The model uses only users with ID &lt; 4000 for training, reserving higher IDs for testing‚Äîensuring true out-of-sample evaluation.</p>

<h3 id="stage-2-embedding-generation">Stage 2: Embedding Generation</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python inference.py
</code></pre></div></div>

<p>This stage:</p>
<ul>
  <li>Processes test users to generate trajectory embeddings</li>
  <li>Applies PCA to reduce dimensionality for visualization</li>
  <li>Creates analysis outputs including scatter plots and statistical summaries</li>
</ul>

<p><strong>Technical Detail</strong>: The 512-dimensional embeddings come from a bidirectional LSTM with 256 hidden units, effectively doubling the representation capacity.</p>

<h3 id="stage-3-interactive-exploration">Stage 3: Interactive Exploration</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python interactive_plot.py
</code></pre></div></div>

<p>The crown jewel: a Dash web application that enables:</p>
<ul>
  <li>Interactive exploration of embedding space</li>
  <li>Point selection and trajectory heatmap generation</li>
  <li>Real-time analysis of mobility patterns</li>
</ul>

<p><img src="/assets/images/Screenshot_20-8-2025_15056_127.0.0.1.jpeg" alt="Interactive Dashboard" />
<em>Interactive dashboard showing PCA projections (left) and trajectory heatmaps (right)</em></p>

<h2 id="remarkable-results-what-the-embeddings-reveal">Remarkable Results: What the Embeddings Reveal</h2>

<p>The PCA analysis reveals fascinating insights:</p>

<p><strong>Clustering by Behavior</strong>: Users with similar mobility patterns cluster together in embedding space, even across different cities.</p>

<p><strong>Spatial Preservation</strong>: Geographic relationships are maintained‚Äîusers who frequent similar areas have similar embeddings.</p>

<p><strong>Temporal Patterns</strong>: Weekend vs. weekday behaviors create distinct embedding regions.</p>

<p><strong>Generalization</strong>: The model successfully captures mobility patterns for completely unseen users.</p>

<h2 id="real-world-applications">Real-World Applications</h2>

<p>This technology opens doors to numerous applications:</p>

<h3 id="Ô∏è-urban-planning">üèôÔ∏è <strong>Urban Planning</strong></h3>
<ul>
  <li><strong>Traffic optimization</strong>: Predict congestion patterns before infrastructure changes</li>
  <li><strong>Public transit</strong>: Design routes based on actual movement patterns</li>
  <li><strong>Zoning decisions</strong>: Understand how people actually use urban spaces</li>
</ul>

<h3 id="-personalized-services">üì± <strong>Personalized Services</strong></h3>
<ul>
  <li><strong>Location recommendations</strong>: ‚ÄúUsers with similar patterns also enjoyed‚Ä¶‚Äù</li>
  <li><strong>Predictive routing</strong>: Anticipate destinations based on historical behavior</li>
  <li><strong>Context-aware apps</strong>: Adapt interfaces based on movement patterns</li>
</ul>

<h3 id="-anomaly-detection">üö® <strong>Anomaly Detection</strong></h3>
<ul>
  <li><strong>Security applications</strong>: Identify unusual movement patterns</li>
  <li><strong>Public health</strong>: Track population mobility during emergencies</li>
  <li><strong>Fraud detection</strong>: Verify location-based claims</li>
</ul>

<h3 id="-business-intelligence">üìä <strong>Business Intelligence</strong></h3>
<ul>
  <li><strong>Retail analytics</strong>: Understand customer foot traffic patterns</li>
  <li><strong>Real estate</strong>: Evaluate locations based on mobility data</li>
  <li><strong>Marketing</strong>: Target audiences based on movement behaviors</li>
</ul>

<h3 id="-research-applications">üî¨ <strong>Research Applications</strong></h3>
<ul>
  <li><strong>Social science</strong>: Study human behavior at scale</li>
  <li><strong>Transportation research</strong>: Validate mobility models</li>
  <li><strong>Economic analysis</strong>: Understand commuting and economic patterns</li>
</ul>

<h2 id="privacy-and-ethics-a-responsible-approach">Privacy and Ethics: A Responsible Approach</h2>

<p>Our implementation prioritizes privacy:</p>
<ul>
  <li><strong>Anonymized data</strong>: No personally identifiable information</li>
  <li><strong>Aggregated insights</strong>: Focus on population-level patterns</li>
  <li><strong>Secure processing</strong>: Local analysis without data sharing</li>
  <li><strong>Transparent methods</strong>: Open-source implementation for scrutiny</li>
</ul>

<h2 id="technical-innovation-why-this-matters">Technical Innovation: Why This Matters</h2>

<p>This project demonstrates several key advances:</p>

<p><strong>1. Multi-Modal Learning</strong>: Successfully combining spatial and temporal information in a unified architecture.</p>

<p><strong>2. Scalable Embeddings</strong>: 512-dimensional representations that capture complex mobility patterns while remaining computationally tractable.</p>

<p><strong>3. Interactive Analysis</strong>: Real-time exploration tools that make complex AI accessible to domain experts.</p>

<p><strong>4. Generalization</strong>: Models that work across different cities and user populations.</p>

<h2 id="getting-started-try-it-yourself">Getting Started: Try It Yourself</h2>

<p>The complete implementation is available with detailed documentation:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Install dependencies</span>
pip <span class="nb">install </span>torch pandas scikit-learn plotly dash

<span class="c"># Train the model</span>
python train_s2s.py

<span class="c"># Generate embeddings</span>
python inference.py

<span class="c"># Launch interactive dashboard</span>
python interactive_plot.py
</code></pre></div></div>

<p>The modular design makes it easy to:</p>
<ul>
  <li>Adapt to your own mobility datasets</li>
  <li>Experiment with different architectures</li>
  <li>Add new visualization components</li>
  <li>Integrate with existing systems</li>
</ul>

<h2 id="the-future-of-mobility-intelligence">The Future of Mobility Intelligence</h2>

<p>This project represents just the beginning. Future directions include:</p>

<ul>
  <li><strong>Federated learning</strong>: Training on distributed datasets while preserving privacy</li>
  <li><strong>Multi-modal integration</strong>: Incorporating weather, events, and social data</li>
  <li><strong>Real-time processing</strong>: Streaming analysis for live mobility insights</li>
  <li><strong>Causal modeling</strong>: Understanding why people move, not just where</li>
</ul>

<h2 id="conclusion-from-data-to-intelligence">Conclusion: From Data to Intelligence</h2>

<p>Human mobility data contains incredible insights waiting to be unlocked. By combining modern deep learning architectures with thoughtful data science, we can transform raw GPS coordinates into intelligent representations that reveal the hidden patterns of human behavior.</p>

<p>The implications extend far beyond technology‚Äîthis work can inform better cities, more personalized services, and deeper understanding of human society. As we continue to generate more location data through our digital lives, tools like these become essential for making sense of our increasingly connected world.</p>

<p>Whether you‚Äôre an urban planner designing the cities of tomorrow, a data scientist exploring new applications, or simply curious about the intersection of AI and human behavior, this project demonstrates the power of applying modern machine learning to one of humanity‚Äôs most fundamental activities: movement through space and time.</p>

<hr />

<p><em>Want to explore the code? Check out the <a href="https://github.com/dlfelps/lstm-trajectory">GitHub repository</a> for complete implementation details, documentation, and examples.</em></p>

<h2 id="about-the-dataset">About the Dataset</h2>

<p>The LYMob-4Cities dataset used in this project represents a significant contribution to mobility research, providing researchers with access to large-scale, anonymized mobility data from diverse urban environments. This type of dataset is crucial for developing and validating mobility models that can generalize across different cities and cultures.</p>

<p>For researchers interested in working with similar data, consider exploring:</p>
<ul>
  <li>Academic partnerships with transportation authorities</li>
  <li>Open mobility datasets from cities with data sharing initiatives</li>
  <li>Synthetic mobility data generation techniques</li>
  <li>Privacy-preserving data collection methods</li>
</ul>

<p>The responsible use of such datasets, with proper anonymization and ethical oversight, enables breakthrough research while protecting individual privacy‚Äîa balance that‚Äôs essential as we advance mobility intelligence.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/claude" class="page__taxonomy-item p-category" rel="tag">claude</a><span class="sep">, </span>
    
      <a href="/tags/gps" class="page__taxonomy-item p-category" rel="tag">gps</a><span class="sep">, </span>
    
      <a href="/tags/mobility" class="page__taxonomy-item p-category" rel="tag">mobility</a>
    
    </span>
  </p>




        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2025-08-21T00:00:00+00:00">August 21, 2025</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?text=Experiment+21%20https%3A%2F%2Fdlfelps.github.io%2F2025%2F08%2F21%2Fmobility.html" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdlfelps.github.io%2F2025%2F08%2F21%2Fmobility.html" class="btn btn--facebook" aria-label="Share on Facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook">
    <i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://dlfelps.github.io/2025/08/21/mobility.html" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

  <a href="https://bsky.app/intent/compose?text=Experiment+21%20https%3A%2F%2Fdlfelps.github.io%2F2025%2F08%2F21%2Fmobility.html" class="btn btn--bluesky" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Bluesky">
    <i class="fab fa-fw fa-bluesky" aria-hidden="true"></i><span> Bluesky</span>
  </a>
</section>


      
  <nav class="pagination">
    
      <a href="/2024/12/01/scraper.html" class="pagination--pager" title="Experiment 20">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
</div>

      
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>


<div class="page__footer-copyright">&copy; 2025 <a href="https://dlfelps.github.io">.NET Experiments</a>. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/jekyll-themes/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>









  </body>
</html>
