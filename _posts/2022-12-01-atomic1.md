---
title: Experiment 10
tags: atomic kotlin functional 
---

This post solves a simple problem from the book Atomic Kotlin using structured and functional styles to compare their solutions.

## Introduction

1. Intro - imperative vs declarative
2. Problem
3. Structural solution
4. Functional solution
5. Functional solution (refactored)
6. Conclusion

https://learn.microsoft.com/en-us/dotnet/standard/linq/functional-vs-imperative-programming
https://www.educative.io/blog/declarative-vs-imperative-programming
https://youtu.be/pFbDZQ9M76Y?t=75



## Problem

Implement `everyFifthNonSpace()` to display every fifth non-space character in the given text. For example, `everyFifthNonSpace("abc d e fgh ik")` displays the characters `e` (fifth character if not counting spaces) and `k` (tenth).

## Structural solution

{% highlight kotlin %}
fun everyFifthNonSpace(s: String) {
  var i = 1
  for (c in s) {
    if (i % 5 == 0 && c != ' ') {
      println(c)
    }
    if (c != ' ') i++
  }
}

fun main() {
  everyFifthNonSpace("abc d e fgh ik")
}
/* Output:
e
k
*/
{% endhighlight %}


## Functional solution

{% highlight kotlin %}
fun everyFifthNonSpace(s: String) {
  val trimmed = s.filterNot{ it.isWhitespace() }
  val listOfChars = trimmed.toList()
  val filtered = listOfChars.filterIndexed { idx, _ -> (idx % 5 == 4) }
  return  filtered.joinToString("")  
}

fun main() {
  val result = everyFifthNonSpace("abc d e fgh ik")
  result.map{ it -> println(it)}
}
/* Output:
e
k
*/
{% endhighlight %}

## Functional solution (refactored)

{% highlight kotlin %}
fun String.everyNth(n: Int) : String {
  val listOfChars = this.toList()
  val filtered = listOfChars.filterIndexed { idx, _ -> (idx % n == (n - 1)) }
  return filtered.joinToString("")
}

fun everyFifth(s:String) = s.everyNth(5)

fun removeWhitespace(s:String) = s.filterNot{it.isWhitespace()}

fun compose(f: (String) -> String, g: (String) -> String) : (String) -> String = { x ->
  g(f(x))
}

val everyFifthNonSpace = compose(::removeWhitespace, ::everyFifth)

fun main() {
  val result = everyFifthNonSpace("abc d e fgh ik")
  result.map{ it -> println(it)}
}
/* Output:
e
k
*/
{% endhighlight %}

## Conclusion




#### Footnotes

[^1]: Justin Lubin. 2021. How Statically-Typed Functional Programmers Author Code. In Extended Abstracts of the 2021 CHI Conference on Human Factors in Computing Systems (CHI EA '21). Association for Computing Machinery, New York, NY, USA, Article 484, 1â€“6. https://doi.org/10.1145/3411763.3451515